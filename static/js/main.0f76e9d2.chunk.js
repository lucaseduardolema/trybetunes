(this.webpackJsonptrybetunes=this.webpackJsonptrybetunes||[]).push([[0],{32:function(e,t,a){},43:function(e,t,a){"use strict";a.r(t);var n=a(1),s=a.n(n),r=a(22),c=a.n(r),i=(a(32),a(6)),o=a(7),l=a(9),u=a(8),d=a(5),j=a(3),h=a.n(j),b=a(4),p=a(15),m=a(17),O="user",f=function(e){return localStorage.setItem(O,JSON.stringify(e))},x=function(e){return function(t){setTimeout((function(){t(e)}),1500)}},v=function(){return new Promise((function(e){var t=JSON.parse(localStorage.getItem(O));null===t&&(t={}),x(t)(e)}))},g=function(e){return new Promise((function(t){f(Object(m.a)(Object(m.a)({},{name:"",email:"",image:"",description:""}),e)),x("OK")(t)}))},k=a(11),y=a.n(k),w=a(0),N=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).handleGetUser=function(){e.setState({isLoading:!0},Object(b.a)(h.a.mark((function t(){var a;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v();case 2:a=t.sent,e.setState({name:a.name,isLoading:!1});case 4:case"end":return t.stop()}}),t)}))))},e.state={name:"",isLoading:!1},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.handleGetUser()}},{key:"render",value:function(){var e=this.state,t=e.name,a=e.isLoading;return Object(w.jsxs)("header",{"data-testid":"header-component",children:[Object(w.jsx)("div",{className:"logo-header"}),Object(w.jsxs)("nav",{children:[Object(w.jsx)(p.b,{"data-testid":"link-to-search",to:"/trybetunes/search",children:"Busca"}),Object(w.jsx)(p.b,{"data-testid":"link-to-favorites",to:"/trybetunes/favorites",children:"Favoritos"}),Object(w.jsx)(p.b,{"data-testid":"link-to-profile",to:"/trybetunes/profile",children:"Perfil"})]}),Object(w.jsx)("div",{className:"user-info",children:a?Object(w.jsx)(y.a,{color:"#f72585",type:"bars",width:"40px",height:"40px"}):Object(w.jsxs)("p",{children:["Ol\xe1 ",Object(w.jsx)("span",{"data-testid":"header-user-name",children:t})]})})]})}}]),a}(s.a.Component),S=a(26),C="favorite_songs";JSON.parse(localStorage.getItem(C))||localStorage.setItem(C,JSON.stringify([]));var F=function(){return JSON.parse(localStorage.getItem(C))},L=function(e){return localStorage.setItem(C,JSON.stringify(e))},I=function(e){return function(t){setTimeout((function(){t(e)}),500)}},D=function(){return new Promise((function(e){var t=F();I(t)(e)}))},U=function(e){return new Promise((function(t){if(e){var a=F();L([].concat(Object(S.a)(a),[e]))}I("OK")(t)}))},P=function(e){return new Promise((function(t){var a=F();L(a.filter((function(t){return t.trackId!==e.trackId}))),I("OK")(t)}))},T=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).isFavorite=function(){var t=e.props,a=t.favorites,n=t.trackId;a.some((function(e){return e.trackId===n}))?e.setState({isFav:!0}):e.setState({isFav:!1})},e.handleFav=function(){e.setState((function(e){return{isLoading:!0,isFav:!e.isFav}}),(function(){setTimeout(Object(b.a)(h.a.mark((function t(){var a;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.props.objTotal,!e.state.isFav){t.next=8;break}return t.next=5,U(a);case 5:e.setState({isLoading:!1}),t.next=11;break;case 8:return t.next=10,P(a);case 10:e.setState({isLoading:!1});case 11:case"end":return t.stop()}}),t)}))),1e3)}))},e.state={isLoading:!1,isFav:!1},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.isFavorite()}},{key:"render",value:function(){var e=this.state,t=e.isLoading,a=e.isFav,n=this.props,s=n.trackName,r=n.previewUrl,c=n.trackId;return Object(w.jsx)("div",{className:"music-cards",children:t?Object(w.jsx)(y.a,{type:"bars",color:"#f72585",width:"100px",height:"100px"}):Object(w.jsxs)("div",{className:"music-cards",children:[Object(w.jsx)("p",{children:s}),Object(w.jsxs)("audio",{"data-testid":"audio-component",src:r,controls:!0,children:[Object(w.jsx)("track",{kind:"captions"}),"O seu navegador n\xe3o suporta o elemento"," ",Object(w.jsx)("code",{children:"audio"}),"."]}),Object(w.jsx)("input",{id:c,name:"fav",type:"checkbox",value:c,checked:a,onChange:this.handleFav}),Object(w.jsx)("label",{htmlFor:c,"data-testid":"checkbox-music-".concat(c),children:"Favorita"})]})})}}]),a}(s.a.Component),E=function(){var e=Object(b.a)(h.a.mark((function e(t){var a,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://itunes.apple.com/lookup?id=".concat(t,"&entity=song"));case 2:return a=e.sent,e.next=5,a.json();case 5:return n=e.sent,e.abrupt("return",n.results);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),J=E,R=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).fetchAlbum=Object(b.a)(h.a.mark((function t(){var a,n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props.match.params.id,t.next=3,J(a);case 3:n=t.sent,e.setState({info:n[0],musics:n.slice(1)});case 5:case"end":return t.stop()}}),t)}))),e.favorites=function(){e.setState({isLoading:!0},(function(){setTimeout(Object(b.a)(h.a.mark((function t(){var a;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,D();case 2:a=t.sent,e.setState({isLoading:!1,favorites:a});case 4:case"end":return t.stop()}}),t)}))),1500)}))},e.state={isLoading:!1,info:{},musics:[],favorites:[]},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.fetchAlbum(),this.favorites()}},{key:"render",value:function(){var e=this.state,t=e.musics,a=e.info,n=a.artworkUrl100,s=a.artistName,r=a.collectionName,c=e.isLoading,i=e.favorites;return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(N,{}),Object(w.jsx)("main",{"data-testid":"page-album",className:"album-page",children:c?Object(w.jsx)(y.a,{type:"bars",color:"#f72585",width:"100px",height:"100px"}):Object(w.jsxs)("section",{className:"album-elements",children:[Object(w.jsxs)("div",{className:"album-info",children:[Object(w.jsx)("img",{src:n,alt:s}),Object(w.jsx)("p",{"data-testid":"album-name",children:r}),Object(w.jsx)("p",{"data-testid":"artist-name",children:s})]}),Object(w.jsx)("div",{className:"music-card-container",children:t.map((function(e){return Object(w.jsx)(T,{trackName:e.trackName,previewUrl:e.previewUrl,trackId:e.trackId,favorites:i,objTotal:e},e.trackId)}))})]})})]})}}]),a}(s.a.Component),M=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).getSongs=Object(b.a)(h.a.mark((function t(){var a;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,D();case 2:a=t.sent,e.setState({songs:a});case 4:case"end":return t.stop()}}),t)}))),e.handleFav=function(t){var a=t.target,n=e.state.songs.find((function(e){return e.trackId===parseInt(a.value,10)}));e.setState({isLoading:!0},Object(b.a)(h.a.mark((function t(){var a;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P(n);case 2:return t.next=4,D();case 4:a=t.sent,e.setState({isLoading:!1,songs:a});case 6:case"end":return t.stop()}}),t)}))))},e.state={isLoading:!1,songs:[],isFav:!0},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.getSongs()}},{key:"render",value:function(){var e=this,t=this.state,a=t.isLoading,n=t.songs,s=t.isFav;return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(N,{}),Object(w.jsxs)("main",{"data-testid":"page-favorites",className:"page-favorites",children:[Object(w.jsx)("h1",{children:"Favoritos"}),a?Object(w.jsx)(y.a,{type:"bars",color:"#f72585",width:"100px",height:"100px"}):Object(w.jsx)("div",{className:"favorite-container",children:n.map((function(t){var a=t.trackName,n=t.previewUrl,r=t.trackId,c=t.artworkUrl60;return Object(w.jsxs)("div",{className:"favorite",children:[Object(w.jsx)("p",{children:a}),Object(w.jsx)("img",{src:c,alt:a}),Object(w.jsxs)("audio",{"data-testid":"audio-component",src:n,controls:!0,children:[Object(w.jsx)("track",{kind:"captions"}),"O seu navegador n\xe3o suporta o elemento ",Object(w.jsx)("code",{children:"audio"}),"."]}),Object(w.jsx)("input",{id:r,name:"fav",type:"checkbox",value:r,checked:s,onChange:e.handleFav}),Object(w.jsx)("label",{htmlFor:r,"data-testid":"checkbox-music-".concat(r),children:"Favorita"})]},r)}))})]})]})}}]),a}(s.a.Component),A=a(16),K=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).handleChange=function(t){var a=t.target,n=a.name,s=a.value;e.setState(Object(A.a)({},n,s),(function(){s.length>=3?e.setState({isDisabled:!1}):e.setState({isDisabled:!0})}))},e.handleClick=function(){e.setState({isLoading:!0},Object(b.a)(h.a.mark((function t(){var a,n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.state.user,n=e.props.history,t.next=4,g({name:a});case 4:n.push("/trybetunes/search");case 5:case"end":return t.stop()}}),t)}))))},e.state={user:"",isDisabled:!0,isLoading:!1},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this.state,t=e.user,a=e.isDisabled,n=e.isLoading;return Object(w.jsxs)("div",{"data-testid":"page-login",className:"container-login",children:[Object(w.jsx)("span",{className:"logo-login"}),n?Object(w.jsx)(y.a,{type:"bars",color:"#f72585",width:"100px",height:"100px"}):Object(w.jsxs)("form",{children:[Object(w.jsx)("label",{htmlFor:"user",children:Object(w.jsx)("input",{"data-testid":"login-name-input",id:"user",type:"text",name:"user",value:t,placeholder:"Usu\xe1rio",onChange:this.handleChange})}),Object(w.jsx)("label",{htmlFor:"password",children:Object(w.jsx)("input",{type:"password",id:"password",placeholder:"Senha"})}),Object(w.jsx)("button",{"data-testid":"login-submit-button",type:"button",disabled:a,onClick:this.handleClick,children:"Entrar"})]})]})}}]),a}(s.a.Component),q=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return Object(w.jsx)("div",{"data-testid":"page-not-found",children:Object(w.jsx)("p",{children:"404"})})}}]),a}(s.a.Component),B=q,G=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).handleUser=Object(b.a)(h.a.mark((function t(){var a;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v();case 2:a=t.sent,e.setState({isLoading:!1,user:a});case 4:case"end":return t.stop()}}),t)}))),e.state={isLoading:!0,user:{}},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.handleUser()}},{key:"render",value:function(){var e=this.state,t=e.isLoading,a=e.user;return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(N,{}),Object(w.jsxs)("main",{"data-testid":"page-profile",className:"page-profile",children:[Object(w.jsx)("h1",{children:"Perfil"}),Object(w.jsx)("div",{className:"profile-container",children:t?Object(w.jsx)(y.a,{type:"bars",color:"#f72585",width:"100px",height:"100px"}):Object(w.jsxs)("div",{className:"profile-info",children:[Object(w.jsx)("img",{"data-testid":"profile-image",src:a.image,alt:a.name}),Object(w.jsxs)("p",{children:["Nome: ",Object(w.jsx)("span",{children:a.name})]}),Object(w.jsxs)("p",{children:["Email: ",Object(w.jsx)("span",{children:a.email})]}),Object(w.jsxs)("p",{children:["Descri\xe7\xe3o: ",Object(w.jsx)("span",{children:a.description})]}),Object(w.jsx)(p.b,{to:"profile/edit",children:"Editar perfil"})]})})]})]})}}]),a}(s.a.Component),$=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).allUserInfoExist=function(){var t=e.state.user;Object.values(t).includes("")||e.setState({isDisabled:!1})},e.handleUser=Object(b.a)(h.a.mark((function t(){var a;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v();case 2:a=t.sent,e.setState({isLoading:!1,user:a},(function(){e.allUserInfoExist()}));case 4:case"end":return t.stop()}}),t)}))),e.handleChange=function(t){var a=t.target,n=a.name,s=a.value;e.setState((function(e){return{user:Object(m.a)(Object(m.a)({},e.user),{},Object(A.a)({},n,s))}}),(function(){e.allUserInfoExist()}))},e.saveProfile=function(){var t,a=e.state.user,n=a.name,s=a.email,r=a.description,c=a.image,i=e.props.history;t={name:n,email:s,image:c,description:r},new Promise((function(e){f(Object(m.a)({},t)),x("OK")(e)})),i.push("/trybetunes/profile")},e.state={isLoading:!0,user:{},isDisabled:!0},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.handleUser()}},{key:"render",value:function(){var e=this.state,t=e.isLoading,a=e.user,n=a.name,s=a.email,r=a.description,c=a.image,i=e.isDisabled;return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(N,{}),Object(w.jsxs)("main",{"data-testid":"page-profile-edit",className:"page-profile-edit",children:[Object(w.jsx)("h1",{children:"Editar Perfil"}),t?Object(w.jsx)(y.a,{type:"bars",color:"#f72585",width:"100px",height:"100px"}):Object(w.jsxs)("form",{children:[Object(w.jsx)("label",{htmlFor:"name",children:"Editar nome"}),Object(w.jsx)("input",{"data-testid":"edit-input-name",id:"name",name:"name",type:"text",value:n,onChange:this.handleChange}),Object(w.jsx)("label",{htmlFor:"email",children:"Editar e-mail"}),Object(w.jsx)("input",{"data-testid":"edit-input-email",id:"email",name:"email",type:"email",value:s,onChange:this.handleChange}),Object(w.jsx)("label",{htmlFor:"description",children:"Editar descri\xe7\xe3o"}),Object(w.jsx)("input",{"data-testid":"edit-input-description",id:"description",name:"description",type:"text",value:r,onChange:this.handleChange}),Object(w.jsx)("label",{htmlFor:"image",children:"Url da imagem"}),Object(w.jsx)("input",{"data-testid":"edit-input-image",id:"image",name:"image",type:"text",value:c,onChange:this.handleChange}),Object(w.jsx)("button",{"data-testid":"edit-button-save",type:"button",disabled:i,onClick:this.saveProfile,children:"Salvar"})]})]})]})}}]),a}(s.a.Component),_=function(){var e=Object(b.a)(h.a.mark((function e(t){var a,n,s,r,c,i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=encodeURI(t).replaceAll("%20","+"),n="https://itunes.apple.com/search?entity=album&term=".concat(a,"&attribute=allArtistTerm"),e.next=4,fetch(n);case 4:return s=e.sent,e.next=7,s.json();case 7:return r=e.sent,c=r.results,i=c.map((function(e){return{artistId:e.artistId,artistName:e.artistName,collectionId:e.collectionId,collectionName:e.collectionName,collectionPrice:e.collectionPrice,artworkUrl100:e.artworkUrl100,releaseDate:e.releaseDate,trackCount:e.trackCount}})),e.abrupt("return",i);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=_,H=a(27),Q=a(25),V=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).handleChange=function(t){var a=t.target,n=a.name,s=a.value;e.setState(Object(A.a)({},n,s),(function(){s.length>=2?e.setState({isDisabled:!1}):e.setState({isDisabled:!0})}))},e.searchResult=function(){var t=e.state.search;e.setState((function(e){return{termSearch:e.search,search:"",isLoading:!0,isDisabled:!0}}),(function(){setTimeout(Object(b.a)(h.a.mark((function a(){var n;return h.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,z(t);case 2:n=a.sent,e.setState({isLoading:!1,hasResults:!0,results:n});case 4:case"end":return a.stop()}}),a)}))),1500)}))},e.state={search:"",termSearch:"",isDisabled:!0,isLoading:!1,hasResults:!1,results:[]},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this.state,t=e.isDisabled,a=e.search,n=e.isLoading,s=e.hasResults,r=e.termSearch,c=e.results;return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(N,{}),Object(w.jsxs)("main",{"data-testid":"page-search",className:"page-search",children:[Object(w.jsx)("aside",{children:n?Object(w.jsx)(y.a,{type:"bars",color:"#f72585",width:"100px",height:"100px"}):s?Object(w.jsxs)("div",{className:"result-asside",children:[Object(w.jsx)("h3",{children:"TrybeTunes"}),Object(w.jsx)("p",{children:"Informa\xe7\xf5es sobre os albuns"}),c.map((function(e){var t=e.collectionId,a=e.collectionPrice,n=e.releaseDate,s=e.trackCount,r=e.collectionName;return Object(w.jsxs)("div",{className:"info-card",children:[Object(w.jsx)(p.b,{to:"/trybetunes/album/".concat(t),children:Object(w.jsx)("p",{children:r.slice(0,30)})}),Object(w.jsx)("p",{children:"Pre\xe7o de lan\xe7amento US$ ".concat(a)}),Object(w.jsx)("p",{children:"Data de lan\xe7amento ".concat(n.slice(0,10).split("-").reverse().join("-"))}),Object(w.jsx)("p",{children:"N\xfamero de faixas ".concat(s)})]},t)}))]}):Object(w.jsxs)("div",{className:"initial-aside",children:[Object(w.jsx)("h3",{children:"TrybeTunes"}),Object(w.jsx)("p",{children:"Use a barra de busca para pesquisar e ouvir uma demonstra\xe7\xe3o"}),Object(w.jsx)("p",{children:"Favorite suas m\xfasicas na p\xe1gina do alb\xfam e acesse elas na p\xe1gina de Favoritos"}),Object(w.jsx)("p",{children:"Acesse e modifique seu perfil"})]})}),Object(w.jsxs)("section",{children:[Object(w.jsxs)("div",{className:"search-container",children:[Object(w.jsxs)("form",{children:[Object(w.jsx)("input",{"data-testid":"search-artist-input",type:"search",name:"search",value:a,onChange:this.handleChange}),Object(w.jsx)("button",{"data-testid":"search-artist-button",type:"button",disabled:t,onClick:this.searchResult,children:Object(w.jsx)(H.a,{icon:Q.a})})]}),s?Object(w.jsx)("p",{children:"Resultado da busca por: ".concat(r)}):Object(w.jsx)("p",{children:"Digite um album ou artista"})]}),Object(w.jsx)("div",{className:"search-main",children:n?Object(w.jsx)(y.a,{type:"bars",color:"#f72585",width:"100px",height:"100px"}):c.map((function(e){var t=e.artistName,a=e.artworkUrl100,n=e.collectionId,s=e.collectionName;return Object(w.jsxs)("div",{className:"search-card",children:[Object(w.jsx)("img",{src:a,alt:t}),Object(w.jsx)(p.b,{"data-testid":"link-to-album-".concat(n),to:"/trybetunes/album/".concat(n),children:Object(w.jsx)("p",{children:s.slice(0,30)})}),Object(w.jsx)("p",{className:"artist-name",children:"Por ".concat(t.slice(0,30))})]},n)}))})]})]})]})}}]),a}(s.a.Component),W=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return Object(w.jsxs)(d.c,{children:[Object(w.jsx)(d.a,{exact:!0,path:"/trybetunes",component:K}),Object(w.jsx)(d.a,{path:"/trybetunes/search",component:V}),Object(w.jsx)(d.a,{path:"/trybetunes/album/:id",component:R}),Object(w.jsx)(d.a,{path:"/trybetunes/favorites",component:M}),Object(w.jsx)(d.a,{exact:!0,path:"/trybetunes/profile",component:G}),Object(w.jsx)(d.a,{path:"/trybetunes/profile/edit",component:$}),Object(w.jsx)(d.a,{path:"*",component:B})]})}}]),a}(s.a.Component),X=W;c.a.render(Object(w.jsx)(p.a,{children:Object(w.jsx)(X,{})}),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.0f76e9d2.chunk.js.map